<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel do Mestre</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.5.0/socket.io.js"></script>
    <script>
        let socket = io();
        
        // Função para atualizar o nome do jogador
        function atualizarNome(jogadorId) {
            let novoNome = document.getElementById(`nome-jogador-${jogadorId}`).value;
            socket.emit('atualizar_nome', { jogadorId: jogadorId, novoNome: novoNome });
        }
    </script>
</head>
<body>
    <h1>Painel do Mestre - Sessão: {{ sessao.nome }}</h1>

    <h2>Jogadores:</h2>
    <ul>
        {% for jogador in sessao.jogadores %}
            <li>
                <input type="text" id="nome-jogador-{{ jogador.id }}" value="{{ jogador.nome }}" onchange="atualizarNome('{{ jogador.id }}')" />
                <span>Link do jogador: <a href="{{ url_for('room', sessao_id=sessao_id, jogador_id=jogador.id) }}" target="_blank">Entrar</a></span>
            </li>
        {% endfor %}
    </ul>

    <h2>Criar Jogador:</h2>
    <form action="/painel/{{ sessao_id }}" method="POST">
        <label for="nome">Nome do Jogador:</label>
        <input type="text" id="nome" name="nome" required>
        <button type="submit">Adicionar Jogador</button>
    </form>
</body>
</html>

